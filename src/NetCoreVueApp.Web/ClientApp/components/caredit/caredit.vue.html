<template>
    <div>
        <h1>Edit Car</h1>
        <div class="row" v-if="!loaded">
            <strong>Loading...</strong>
        </div>

        <div class="row" v-if="loaded">
            <div class="col-md-2">
                <label>Year</label>
                <input class="form-control" type="text" :disabled="!editing" />
            </div>
        </div>

        <div class="row" v-if="loaded">
            <div class="col-md-2">
                <label>Make</label>
                <select class="form-control" v-model="car.makeId" v-on:change="handleMakeChange" :disabled="!editing">
                    <option value="0">--</option>
                    <option v-for="(item, index) in makes" :key="item.makeId" :value="item.makeId">
                        {{item.makeName}}
                    </option>
                </select>
            </div>
        </div>

        <div class="row" v-if="loaded">
            <div class="col-md-2">
                <label>Model</label>
                <select class="form-control" v-model="car.modelId" :disabled="!editing">
                    <option value="0">--</option>
                    <option v-for="(item, index) in filteredModels" :key="item.modelId" :value="item.modelId">
                        {{item.modelName}}
                    </option>
                </select>
            </div>
        </div>

        <div class="row" v-if="loaded">
            <div class="col-md-2">
                <label>Price</label>
                <input class="form-control" v-model="car.price" type="text" :disabled="!editing">
            </div>
        </div>

        <div class="row" v-if="loaded">
            <div class="col-md-6">
                <label>Notes</label>
                <textarea class="form-control" v-model="car.notes" :disabled="!editing" />
            </div>
        </div>

        <edit-buttons-component isNewCancelRedirect="cars" :isNew="isNew" :isEditing="editing" v-on:toggleEditing="toggleEditing" v-on:handleSave="handleSave"></edit-buttons-component>

    </div>
</template>

<script src="./caredit.ts"></script>